{"version":3,"file":"plugins.js","sources":["../src/Parallax.ts","../src/Fade.ts","../src/AutoPlay.ts","../src/event.ts","../src/const.ts","../src/utils.ts","../src/Arrow.ts","../src/Sync.ts","../src/Perspective.ts","../src/pagination/renderer/Renderer.ts","../src/pagination/renderer/BulletRenderer.ts","../src/pagination/renderer/FractionRenderer.ts","../src/pagination/renderer/ScrollBulletRenderer.ts","../src/pagination/Pagination.ts","../src/index.ts"],"sourcesContent":["import Flicking, { EVENTS, Plugin } from \"@egjs/flicking\";\n\n/**\n * You can apply parallax effect while panel is moving.\n * @ko 패널들을 움직이면서 parallax 효과를 부여할 수 있습니다.\n * @memberof Flicking.Plugins\n */\nclass Parallax implements Plugin {\n  private _flicking: Flicking | null;\n\n  /* Options  */\n  private _selector: string;\n  private _scale: number;\n\n  public get selector() { return this._selector; }\n  public get scale() { return this._scale; }\n\n  public set selector(val: string) { this._selector = val; }\n  public set scale(val: number) { this._scale = val; }\n\n  /**\n   * @param {string} selector Selector of the element to apply parallax effect<ko> Parallax 효과를 적용할 엘리먼트의 선택자 </ko>\n   * @param {number} scale Effect amplication scale<ko>효과 증폭도</ko>\n   * @example\n   * ```ts\n   * flicking.addPlugins(new Parallax(\"img\", 1));\n   * ```\n   */\n  public constructor(selector = \"\", scale = 1) {\n    this._flicking = null;\n    this._selector = selector;\n    this._scale = scale;\n  }\n\n  public init(flicking: Flicking): void {\n    if (this._flicking) {\n      this.destroy();\n    }\n\n    this._flicking = flicking;\n\n    flicking.on(EVENTS.MOVE, this._onMove);\n    flicking.on(EVENTS.AFTER_RESIZE, this.update);\n    this._onMove();\n  }\n\n  public destroy(): void {\n    if (!this._flicking) return;\n\n    this._flicking.off(EVENTS.MOVE, this._onMove);\n    this._flicking.off(EVENTS.AFTER_RESIZE, this.update);\n    this._flicking = null;\n  }\n\n  public update = (): void => {\n    this._onMove();\n  };\n\n  private _onMove = (): void => {\n    const flicking = this._flicking;\n\n    if (!flicking) return;\n\n    const panels = flicking.visiblePanels;\n\n    panels.forEach(panel => {\n      const progress = panel.outsetProgress;\n      const el = panel.element;\n      const target = this._selector ? el.querySelector<HTMLElement>(this._selector)! : el;\n      const parentTarget = target.parentNode as Element;\n      const rect = target.getBoundingClientRect();\n      const parentRect = parentTarget.getBoundingClientRect();\n      const position = (parentRect.width - rect.width) / 2 * progress * this._scale;\n      const transform = `translate(-50%) translate(${position}px)`;\n      const style = target.style;\n\n      style.cssText += `transform: ${transform};-webkit-transform: ${transform};-ms-transform:${transform}`;\n    });\n  };\n}\nexport default Parallax;\n","import Flicking, { EVENTS, Plugin } from \"@egjs/flicking\";\n\n/**\n * You can apply fade in / out effect while panel is moving.\n * @ko 패널들을 움직이면서 fade in / out 효과를 부여할 수 있습니다.\n * @memberof Flicking.Plugins\n */\nclass Fade implements Plugin {\n  private _flicking: Flicking | null;\n\n  /* Options  */\n  private _selector: string;\n  private _scale: number;\n\n  public get selector() { return this._selector; }\n  public get scale() { return this._scale; }\n\n  public set selector(val: string) { this._selector = val; }\n  public set scale(val: number) { this._scale = val; }\n\n  /**\n   * @param - The selector of the element to which the fade effect is to be applied. If the selector is blank, it applies to panel element. <ko>Fade 효과를 적용할 대상의 선택자. 선택자가 공백이면 패널 엘리먼트에 적용된다.</ko>\n   * @param - Effect amplication scale<ko>효과 증폭도</ko>\n   * @example\n   * ```ts\n   * flicking.addPlugins(new Fade(\"p\", 1));\n   * ```\n   */\n  public constructor(selector = \"\", scale = 1) {\n    this._flicking = null;\n    this._selector = selector;\n    this._scale = scale;\n  }\n\n  public init(flicking: Flicking): void {\n    if (this._flicking) {\n      this.destroy();\n    }\n\n    this._flicking = flicking;\n\n    flicking.on(EVENTS.MOVE, this._onMove);\n    flicking.on(EVENTS.AFTER_RESIZE, this.update);\n    this._onMove();\n  }\n\n  public destroy(): void {\n    if (!this._flicking) return;\n\n    this._flicking.off(EVENTS.MOVE, this._onMove);\n    this._flicking.off(EVENTS.AFTER_RESIZE, this.update);\n    this._flicking = null;\n  }\n\n  public update = (): void => {\n    this._onMove();\n  };\n\n  private _onMove = (): void => {\n    const flicking = this._flicking;\n    const selector = this._selector;\n    const scale = this._scale;\n\n    if (!flicking) return;\n\n    const panels = flicking.visiblePanels;\n\n    panels.forEach(panel => {\n      const progress = panel.outsetProgress;\n      const el = panel.element;\n      const target = selector ? el.querySelector<HTMLElement>(selector)! : el;\n      const opacity = Math.min(1, Math.max(0, (1 - Math.abs(progress * scale))));\n\n      target.style.opacity = `${opacity}`;\n    });\n  };\n}\n\nexport default Fade;\n","import Flicking, { EVENTS, Plugin, DIRECTION } from \"@egjs/flicking\";\n\ninterface AutoPlayOptions {\n  duration: number;\n  animationDuration: number | undefined;\n  direction: typeof DIRECTION[\"NEXT\"] | typeof DIRECTION[\"PREV\"];\n  stopOnHover: boolean;\n  delayAfterHover: number;\n}\n\n/**\n * Plugin that allow you to automatically move to the next/previous panel, on a specific time basis\n * @ko 일정 시간마다, 자동으로 다음/이전 패널로 넘어가도록 할 수 있는 플러그인\n * @memberof Flicking.Plugins\n */\nclass AutoPlay implements Plugin {\n  /* Options */\n  private _duration: AutoPlayOptions[\"duration\"];\n  private _animationDuration: AutoPlayOptions[\"animationDuration\"];\n  private _direction: AutoPlayOptions[\"direction\"];\n  private _stopOnHover: AutoPlayOptions[\"stopOnHover\"];\n  private _delayAfterHover: AutoPlayOptions[\"delayAfterHover\"];\n\n  /* Internal Values */\n  private _flicking: Flicking | null = null;\n  private _timerId = 0;\n  private _mouseEntered = false;\n\n  public get duration() { return this._duration; }\n  public get animationDuration() { return this._animationDuration; }\n  public get direction() { return this._direction; }\n  public get stopOnHover() { return this._stopOnHover; }\n  public get delayAfterHover() { return this._delayAfterHover; }\n\n  public set duration(val: number) { this._duration = val; }\n  public set animationDuration(val: number | undefined) { this._animationDuration = val; }\n  public set direction(val: AutoPlayOptions[\"direction\"]) { this._direction = val; }\n  public set stopOnHover(val: boolean) { this._stopOnHover = val; }\n  public set delayAfterHover(val: number) { this._delayAfterHover = val; }\n\n  /**\n   * @param {AutoPlayOptions} options Options for the AutoPlay instance.<ko>AutoPlay 옵션</ko>\n   * @param {number} options.duration Time to wait before moving on to the next panel.<ko>다음 패널로 움직이기까지 대기 시간</ko>\n   * @param {number | undefined} options.animationDuration Duration of animation of moving to the next panel. If undefined, duration option of the Flicking instance is used instead.<ko>패널이 움직이는 애니메이션의 지속 시간, undefined라면 Flicking 인스턴스의 duration 값을 사용한다</ko>\n   * @param {\"PREV\" | \"NEXT\"} options.direction The direction in which the panel moves.<ko>패널이 움직이는 방향</ko>\n   * @param {boolean} options.stopOnHover Whether to stop when mouse hover upon the element.<ko>엘리먼트에 마우스를 올렸을 때 AutoPlay를 정지할지 여부</ko>\n   * @param {number} options.delayAfterHover If stopOnHover is true, the amount of time to wait before moving on to the next panel when mouse leaves the element.<ko>stopOnHover를 사용한다면 마우스가 엘리먼트로부터 나간 뒤 다음 패널로 움직이기까지 대기 시간</ko>\n   * @example\n   * ```ts\n   * flicking.addPlugins(new AutoPlay({ duration: 2000, direction: \"NEXT\" }));\n   * ```\n   */\n  public constructor({\n    duration = 2000,\n    animationDuration = undefined,\n    direction = DIRECTION.NEXT,\n    stopOnHover = false,\n    delayAfterHover\n  }: Partial<AutoPlayOptions> = {}) {\n    this._duration = duration;\n    this._animationDuration = animationDuration;\n    this._direction = direction;\n    this._stopOnHover = stopOnHover;\n    this._delayAfterHover = delayAfterHover ?? duration;\n  }\n\n  public init(flicking: Flicking): void {\n    if (this._flicking) {\n      this.destroy();\n    }\n\n    flicking.on({\n      [EVENTS.MOVE_START]: this.stop,\n      [EVENTS.HOLD_START]: this.stop,\n      [EVENTS.MOVE_END]: this.play,\n      [EVENTS.SELECT]: this.play\n    });\n\n    this._flicking = flicking;\n    if (this._stopOnHover) {\n      const targetEl = this._flicking.element;\n      targetEl.addEventListener(\"mouseenter\", this._onMouseEnter, false);\n      targetEl.addEventListener(\"mouseleave\", this._onMouseLeave, false);\n    }\n\n    this.play();\n  }\n\n  public destroy(): void {\n    const flicking = this._flicking;\n\n    this._mouseEntered = false;\n    this.stop();\n\n    if (!flicking) {\n      return;\n    }\n\n    flicking.off(EVENTS.MOVE_START, this.stop);\n    flicking.off(EVENTS.HOLD_START, this.stop);\n    flicking.off(EVENTS.MOVE_END, this.play);\n    flicking.off(EVENTS.SELECT, this.play);\n\n    const targetEl = flicking.element;\n    targetEl.removeEventListener(\"mouseenter\", this._onMouseEnter, false);\n    targetEl.removeEventListener(\"mouseleave\", this._onMouseLeave, false);\n\n    this._flicking = null;\n  }\n\n  public update(): void {\n    // DO-NOTHING\n  }\n\n  public play = () => {\n    this._movePanel(this._duration);\n  };\n\n  public stop = () => {\n    clearTimeout(this._timerId);\n  };\n\n  private _movePanel(duration: number): void {\n    const flicking = this._flicking;\n    const direction = this._direction;\n\n    if (!flicking) {\n      return;\n    }\n\n    this.stop();\n\n    if (this._mouseEntered || flicking.animating) {\n      return;\n    }\n\n    this._timerId = window.setTimeout(() => {\n      if (direction === DIRECTION.NEXT) {\n        flicking.next(this._animationDuration).catch(() => void 0);\n      } else {\n        flicking.prev(this._animationDuration).catch(() => void 0);\n      }\n\n      this.play();\n    }, duration);\n  }\n\n  private _onMouseEnter = () => {\n    this._mouseEntered = true;\n    this.stop();\n  };\n\n  private _onMouseLeave = () => {\n    this._mouseEntered = false;\n    this._movePanel(this._delayAfterHover);\n  };\n}\n\nexport default AutoPlay;\n","export const BROWSER = {\n  CLICK: \"click\",\n  MOUSE_DOWN: \"mousedown\",\n  TOUCH_START: \"touchstart\"\n};\n","export const ARROW = {\n  PREV_SELECTOR: \".flicking-arrow-prev\",\n  NEXT_SELECTOR: \".flicking-arrow-next\",\n  DISABLED_CLASS: \"flicking-arrow-disabled\"\n} as const;\n\nexport const PAGINATION = {\n  SELECTOR: \".flicking-pagination\",\n  PREFIX: \"flicking-pagination\",\n  BULLET_WRAPPER_SUFFIX: \"bullets\",\n  BULLET_SUFFIX: \"bullet\",\n  BULLET_ACTIVE_SUFFIX: \"bullet-active\",\n  FRACTION_WRAPPER_SUFFIX: \"fraction\",\n  FRACTION_CURRENT_SUFFIX: \"fraction-current\",\n  FRACTION_TOTAL_SUFFIX: \"fraction-total\",\n  SCROLL_UNINIT_SUFFIX: \"uninitialized\",\n  SCROLL_WRAPPER_SUFFIX: \"scroll\",\n  SCROLL_SLIDER_SUFFIX: \"slider\",\n  SCROLL_PREV_SUFFIX: \"bullet-prev\",\n  SCROLL_NEXT_SUFFIX: \"bullet-next\",\n  TYPE: {\n    BULLET: \"bullet\",\n    FRACTION: \"fraction\",\n    SCROLL: \"scroll\"\n  }\n} as const;\n\nexport const SYNC = {\n  TYPE: {\n    CAMERA: \"camera\",\n    INDEX: \"index\"\n  }\n} as const;\n","export const addClass = (el: HTMLElement, className: string) => {\n  if (!el) return;\n\n  if (el.classList) {\n    el.classList.add(className);\n  } else {\n    const classes = el.className.split(\" \");\n\n    if (classes.indexOf(className) < 0) {\n      el.className = `${el.className} ${className}`;\n    }\n  }\n};\n\nexport const removeClass = (el: HTMLElement, className: string) => {\n  if (!el) return;\n\n  if (el.classList) {\n    el.classList.remove(className);\n  } else {\n    const classRegex = new RegExp(`( |^)${className}( |$)`, \"g\");\n    el.className.replace(classRegex, \" \");\n  }\n};\n\nexport const getElement = (selector: string, parent: HTMLElement, pluginName: string) => {\n  const el = parent.querySelector(selector);\n\n  if (!el) {\n    throw new Error(`[Flicking-${pluginName}] Couldn't find element with the given selector: ${selector}`);\n  }\n\n  return el as HTMLElement;\n};\n","import Flicking, { EVENTS, FlickingError, Plugin } from \"@egjs/flicking\";\n\nimport { BROWSER } from \"./event\";\nimport { ARROW } from \"./const\";\nimport { addClass, getElement, removeClass } from \"./utils\";\n\ninterface ArrowOptions {\n  parentEl: HTMLElement | null;\n  prevElSelector: string;\n  nextElSelector: string;\n  disabledClass: string;\n  moveCount: number;\n  moveByViewportSize: boolean;\n}\n\n/**\n * A plugin to easily create prev/right arrow button of Flicking\n * @ko 이전/다음 버튼을 쉽게 만들 수 있는 플러그인\n * @memberof Flicking.Plugins\n */\nclass Arrow implements Plugin {\n  /* Internal Values */\n  private _flicking: Flicking | null = null;\n  private _prevEl: HTMLElement;\n  private _nextEl: HTMLElement;\n\n  /* Options */\n  private _parentEl: ArrowOptions[\"parentEl\"];\n  private _prevElSelector: ArrowOptions[\"prevElSelector\"];\n  private _nextElSelector: ArrowOptions[\"nextElSelector\"];\n  private _disabledClass: ArrowOptions[\"disabledClass\"];\n  private _moveCount: ArrowOptions[\"moveCount\"];\n  private _moveByViewportSize: ArrowOptions[\"moveByViewportSize\"];\n\n  public get prevEl() { return this._prevEl; }\n  public get nextEl() { return this._nextEl; }\n\n  public get parentEl() { return this._parentEl; }\n  public get prevElSelector() { return this._prevElSelector; }\n  public get nextElSelector() { return this._nextElSelector; }\n  public get disabledClass() { return this._disabledClass; }\n  public get moveCount() { return this._moveCount; }\n  public get moveByViewportSize() { return this._moveByViewportSize; }\n\n  public set parentEl(val: ArrowOptions[\"parentEl\"]) { this._parentEl = val; }\n  public set prevElSelector(val: ArrowOptions[\"prevElSelector\"]) { this._prevElSelector = val; }\n  public set nextElSelector(val: ArrowOptions[\"nextElSelector\"]) { this._nextElSelector = val; }\n  public set disabledClass(val: ArrowOptions[\"disabledClass\"]) { this._disabledClass = val; }\n  public set moveCount(val: ArrowOptions[\"moveCount\"]) { this._moveCount = val; }\n  public set moveByViewportSize(val: ArrowOptions[\"moveByViewportSize\"]) { this._moveByViewportSize = val; }\n\n  public constructor({\n    parentEl = null,\n    prevElSelector = ARROW.PREV_SELECTOR,\n    nextElSelector = ARROW.NEXT_SELECTOR,\n    disabledClass = ARROW.DISABLED_CLASS,\n    moveCount = 1,\n    moveByViewportSize = false\n  }: Partial<ArrowOptions> = {}) {\n    this._parentEl = parentEl;\n    this._prevElSelector = prevElSelector;\n    this._nextElSelector = nextElSelector;\n    this._disabledClass = disabledClass;\n    this._moveCount = moveCount;\n    this._moveByViewportSize = moveByViewportSize;\n  }\n\n  public init(flicking: Flicking): void {\n    if (this._flicking) {\n      this.destroy();\n    }\n\n    this._flicking = flicking;\n\n    flicking.on(EVENTS.MOVE, this._onAnimation);\n\n    const parentEl = this._parentEl ? this._parentEl : flicking.element;\n    const prevEl = getElement(this._prevElSelector, parentEl, \"Arrow\");\n    const nextEl = getElement(this._nextElSelector, parentEl, \"Arrow\");\n\n    [BROWSER.MOUSE_DOWN, BROWSER.TOUCH_START].forEach(evt => {\n      prevEl.addEventListener(evt, this._preventInputPropagation, { passive: true });\n      nextEl.addEventListener(evt, this._preventInputPropagation, { passive: true });\n    });\n\n    prevEl.addEventListener(BROWSER.CLICK, this._onPrevClick);\n    nextEl.addEventListener(BROWSER.CLICK, this._onNextClick);\n\n    this._prevEl = prevEl;\n    this._nextEl = nextEl;\n\n    this.update();\n  }\n\n  public destroy(): void {\n    const flicking = this._flicking;\n\n    if (!flicking) {\n      return;\n    }\n\n    flicking.off(EVENTS.MOVE, this._onAnimation);\n\n    const prevEl = this._prevEl;\n    const nextEl = this._nextEl;\n\n    [BROWSER.MOUSE_DOWN, BROWSER.TOUCH_START].forEach(evt => {\n      prevEl.removeEventListener(evt, this._preventInputPropagation);\n      nextEl.removeEventListener(evt, this._preventInputPropagation);\n    });\n\n    prevEl.removeEventListener(BROWSER.CLICK, this._onPrevClick);\n    nextEl.removeEventListener(BROWSER.CLICK, this._onNextClick);\n    this._flicking = null;\n  }\n\n  public update(): void {\n    this._updateClass(this._flicking!.camera.position);\n  }\n\n  private _preventInputPropagation = (e: Event) => {\n    e.stopPropagation();\n  };\n\n  private _onPrevClick = () => {\n    const flicking = this._flicking!;\n    const camera = flicking.camera;\n    const anchorPoints = camera.anchorPoints;\n\n    if (flicking.animating || anchorPoints.length <= 0) return;\n\n    const firstAnchor = anchorPoints[0];\n    const moveCount = this._moveCount;\n\n    if (this._moveByViewportSize) {\n      flicking.control.moveToPosition(camera.position - camera.size, flicking.duration)\n        .catch(this._onCatch);\n    } else {\n      if (flicking.circularEnabled) {\n        let targetPanel = flicking.currentPanel;\n\n        for (let i = 0; i < moveCount; i++) {\n          targetPanel = targetPanel.prev()!;\n        }\n\n        targetPanel.focus().catch(this._onCatch);\n      } else if (flicking.index > firstAnchor.panel.index) {\n        flicking.moveTo(Math.max(flicking.index - moveCount, firstAnchor.panel.index))\n          .catch(this._onCatch);\n      } else if (camera.position > camera.range.min) {\n        flicking.moveTo(flicking.index)\n          .catch(this._onCatch);\n      }\n    }\n  };\n\n  private _onNextClick = () => {\n    const flicking = this._flicking!;\n\n    const camera = flicking.camera;\n    const anchorPoints = camera.anchorPoints;\n\n    if (flicking.animating || anchorPoints.length <= 0) return;\n\n    const lastAnchor = anchorPoints[anchorPoints.length - 1];\n    const moveCount = this._moveCount;\n\n    if (this._moveByViewportSize) {\n      flicking.control.moveToPosition(camera.position + camera.size, flicking.duration)\n        .catch(this._onCatch);\n    } else {\n      if (flicking.circularEnabled) {\n        let targetPanel = flicking.currentPanel;\n\n        for (let i = 0; i < moveCount; i++) {\n          targetPanel = targetPanel.next()!;\n        }\n\n        targetPanel.focus().catch(this._onCatch);\n      } else if (flicking.index < lastAnchor.panel.index) {\n        flicking.moveTo(Math.min(flicking.index + moveCount, lastAnchor.panel.index))\n          .catch(this._onCatch);\n      } else if (camera.position > camera.range.min) {\n        flicking.moveTo(flicking.index)\n          .catch(this._onCatch);\n      }\n    }\n  };\n\n  private _onAnimation = () => {\n    const flicking = this._flicking!;\n    const camera = flicking.camera;\n    const controller = flicking.control.controller;\n\n    if (flicking.holding) {\n      this._updateClass(camera.position);\n    } else {\n      this._updateClass(controller.animatingContext.end);\n    }\n  };\n\n  private _updateClass(pos: number) {\n    const flicking = this._flicking!;\n    const disabledClass = this._disabledClass;\n    const prevEl = this._prevEl;\n    const nextEl = this._nextEl;\n    const cameraRange = flicking.camera.range;\n\n    const stopAtPrevEdge = flicking.circularEnabled\n      ? false\n      : pos <= cameraRange.min;\n    const stopAtNextEdge = flicking.circularEnabled\n      ? false\n      : pos >= cameraRange.max;\n\n    if (stopAtPrevEdge) {\n      addClass(prevEl, disabledClass);\n    } else {\n      removeClass(prevEl, disabledClass);\n    }\n\n    if (stopAtNextEdge) {\n      addClass(nextEl, disabledClass);\n    } else {\n      removeClass(nextEl, disabledClass);\n    }\n  }\n\n  private _onCatch = (err: Error) => {\n    if (err instanceof FlickingError) return;\n    throw err;\n  };\n}\n\nexport default Arrow;\n","import Flicking, { clamp, EVENTS } from \"@egjs/flicking\";\nimport type { MoveEndEvent, MoveEvent, MoveStartEvent, Plugin, WillChangeEvent, SelectEvent } from \"@egjs/flicking\";\n\nimport { SYNC } from \"./const\";\nimport { addClass, removeClass } from \"./utils\";\n\n/**\n * @property {string} [type=\"camera\"] Types of methods to synchronize between Flickings. \"camera\" will sync by camera position, and \"index\" will sync by panel index\n * @property {SychronizableFlickingOptions} [synchronizedFlickingOptions=[]]\tDetailed options for syncing Flickings.\n */\nexport interface SyncOptions {\n  type: typeof SYNC.TYPE.CAMERA | typeof SYNC.TYPE.INDEX;\n  synchronizedFlickingOptions: SychronizableFlickingOptions[];\n}\n\n/**\n * @property {Flicking} flicking An instance of Flicking to sync\n * @property {boolean} [isClickable=false] By enabling this option, clicking the given Flicking's panel will change the given & other Flicking's index\n * @property {boolean} [isSlidable=false] By enabling this option, the given Flicking's scroll with mouse/touch input will change other Flicking's index. Only available for the index type\n * @property {string | undefined} [activeClass=undefined] An extra class for the panels when selected\n */\nexport interface SychronizableFlickingOptions {\n  flicking: Flicking;\n  isClickable?: boolean;\n  isSlidable?: boolean;\n  activeClass?: string;\n}\n\n/**\n * Plugin for synchronizing multiple flickings\n * @ko 다양한 형태로 Flicking들이 같이 움직이게 할 수 있습니다.\n * @memberof Flicking.Plugins\n */\nclass Sync implements Plugin {\n  /* Internal Values */\n  private _flicking: Flicking | null = null;\n\n  /* Options */\n  private _type: SyncOptions[\"type\"];\n  private _synchronizedFlickingOptions: SyncOptions[\"synchronizedFlickingOptions\"];\n\n  public get type() { return this._type; }\n  public get synchronizedFlickingOptions() { return this._synchronizedFlickingOptions; }\n\n  public set type(val: SyncOptions[\"type\"]) {\n    this._type = val;\n  }\n\n  public set synchronizedFlickingOptions(val: SyncOptions[\"synchronizedFlickingOptions\"]) {\n    this._synchronizedFlickingOptions = val;\n  }\n\n  /** */\n  public constructor({\n    type = SYNC.TYPE.CAMERA,\n    synchronizedFlickingOptions = []\n  }: Partial<SyncOptions> = {}) {\n    this._type = type;\n    this._synchronizedFlickingOptions = synchronizedFlickingOptions;\n  }\n\n  public init(flicking: Flicking): void {\n    const synced = this._synchronizedFlickingOptions;\n\n    if (this._flicking) {\n      this.destroy();\n    }\n\n    this._flicking = flicking;\n\n    this._addEvents();\n\n    synced.forEach(options => {\n      const { flicking: syncedFlicking } = options;\n\n      this._updateClass(options, syncedFlicking.defaultIndex);\n    });\n  }\n\n  public destroy(): void {\n    const flicking = this._flicking;\n\n    if (!flicking) {\n      return;\n    }\n\n    this._removeEvents();\n\n    this._flicking = null;\n  }\n\n  public update(): void {\n    this._synchronizedFlickingOptions.forEach(options => {\n      this._updateClass(options, options.flicking.index);\n    });\n  }\n\n  private _preventEvent(fn: () => void) {\n    this._removeEvents();\n    fn();\n    this._addEvents();\n  }\n\n  private _addEvents = (): void => {\n    const type = this._type;\n    const synced = this._synchronizedFlickingOptions;\n\n    synced.forEach(({ flicking, isSlidable, isClickable }) => {\n      if (type === SYNC.TYPE.CAMERA) {\n        flicking.on(EVENTS.MOVE, this._onMove);\n        flicking.on(EVENTS.MOVE_START, this._onMoveStart);\n        flicking.on(EVENTS.MOVE_END, this._onMoveEnd);\n      }\n      if (type === SYNC.TYPE.INDEX && isSlidable) {\n        flicking.on(EVENTS.WILL_CHANGE, this._onIndexChange);\n        flicking.on(EVENTS.WILL_RESTORE, this._onIndexChange);\n      }\n      if (isClickable) {\n        flicking.on(EVENTS.SELECT, this._onSelect);\n      }\n    });\n  };\n\n  private _removeEvents = (): void => {\n    const type = this._type;\n    const synced = this._synchronizedFlickingOptions;\n\n    synced.forEach(({ flicking, isSlidable, isClickable }) => {\n      if (type === SYNC.TYPE.CAMERA) {\n        flicking.off(EVENTS.MOVE, this._onMove);\n        flicking.off(EVENTS.MOVE_START, this._onMoveStart);\n        flicking.off(EVENTS.MOVE_END, this._onMoveEnd);\n      }\n      if (type === SYNC.TYPE.INDEX && isSlidable) {\n        flicking.off(EVENTS.WILL_CHANGE, this._onIndexChange);\n        flicking.off(EVENTS.WILL_RESTORE, this._onIndexChange);\n      }\n      if (isClickable) {\n        flicking.off(EVENTS.SELECT, this._onSelect);\n      }\n    });\n  };\n\n  private _onIndexChange = (e: WillChangeEvent): void => {\n    const flicking = e.currentTarget;\n\n    if (!flicking.initialized) {\n      return;\n    }\n\n    this._synchronizeByIndex(flicking, e.index);\n  };\n\n  private _onMove = (e: MoveEvent): void => {\n    const camera = e.currentTarget.camera;\n    const progress = (camera.position - camera.range.min) / camera.rangeDiff;\n\n    this._synchronizedFlickingOptions.forEach(({ flicking }) => {\n      if (flicking === e.currentTarget) return;\n\n      let targetPosition = 0;\n\n      if (camera.position < camera.range.min) {\n        targetPosition = camera.position;\n      } else if (camera.position > camera.range.max) {\n        targetPosition = flicking.camera.range.max + camera.position - camera.range.max;\n      } else {\n        targetPosition = flicking.camera.range.min + flicking.camera.rangeDiff * progress;\n      }\n\n      void flicking.camera.lookAt(targetPosition);\n    });\n  };\n\n  private _onMoveStart = (e: MoveStartEvent): void => {\n    this._synchronizedFlickingOptions.forEach(({ flicking }) => {\n      if (flicking !== e.currentTarget) {\n        flicking.disableInput();\n      }\n    });\n  };\n\n  private _onMoveEnd = (e: MoveEndEvent): void => {\n    this._synchronizedFlickingOptions.forEach(({ flicking }) => {\n      if (flicking !== e.currentTarget) {\n        flicking.enableInput();\n        flicking.control.updateInput();\n      }\n    });\n  };\n\n  private _onSelect = (e: SelectEvent): void => {\n    void e.currentTarget.moveTo(e.index).catch(() => void 0);\n\n    this._synchronizeByIndex(e.currentTarget, e.index);\n  };\n\n  private _synchronizeByIndex = (activeFlicking: Flicking, index: number): void => {\n    const synchronizedFlickingOptions = this._synchronizedFlickingOptions;\n\n    this._preventEvent(() => {\n      synchronizedFlickingOptions.forEach(options => {\n        // Active class should be applied same to the Flicking which triggered event\n        this._updateClass(options, index);\n\n        const { flicking } = options;\n        if (flicking === activeFlicking) return;\n\n        const targetIndex = clamp(index, 0, flicking.panels.length);\n\n        if (flicking.animating) {\n          // Reserve moveTo once previous animation is finished\n          flicking.once(EVENTS.MOVE_END, () => {\n            void flicking.moveTo(targetIndex).catch(() => void 0);\n          });\n        } else {\n          void flicking.moveTo(targetIndex);\n        }\n      });\n    });\n  };\n\n  private _updateClass = ({ flicking, activeClass }: SychronizableFlickingOptions, index: number): void => {\n    if (!activeClass) return;\n\n    flicking.panels.forEach(panel => {\n      if (panel.index === index)  {\n        addClass(panel.element, activeClass);\n      } else {\n        removeClass(panel.element, activeClass);\n      }\n    });\n  };\n}\n\nexport default Sync;\n","/* eslint-disable no-underscore-dangle */\nimport Flicking, { EVENTS, Plugin } from \"@egjs/flicking\";\n\ninterface PerspectiveOptions {\n  selector: string;\n  scale: number;\n  rotate: number;\n  perspective: number;\n}\n\n/**\n * You can apply perspective effect while panel is moving.\n * @ko 패널들을 움직이면서 입체감을 부여할 수 있습니다.\n * @memberof Flicking.Plugins\n */\nclass Perspective implements Plugin {\n  private _flicking: Flicking | null;\n\n  /* Options  */\n  private _selector: PerspectiveOptions[\"selector\"];\n  private _scale: PerspectiveOptions[\"scale\"];\n  private _rotate: PerspectiveOptions[\"rotate\"];\n  private _perspective: PerspectiveOptions[\"perspective\"];\n\n  public get selector() { return this._selector; }\n  public get scale() { return this._scale; }\n  public get rotate() { return this._rotate; }\n  public get perspective() { return this._perspective; }\n\n  public set selector(val: string) { this._selector = val; }\n  public set scale(val: number) { this._scale = val; }\n  public set rotate(val: number) { this._rotate = val; }\n  public set perspective(val: number) { this._perspective = val; }\n\n  /**\n   * @param - The selector of the element to which the perspective effect is to be applied. If the selector is blank, it applies to panel element. <ko>입체 효과를 적용할 대상의 선택자. 선택자가 공백이면 패널 엘리먼트에 적용된다.</ko>\n   * @param - Effect amplication scale.<ko>효과 증폭도</ko>\n   * @param - Effect amplication rotate.<ko>회전 증폭도</ko>\n   * @param - The value of perspective CSS property. <ko>css perspective 속성 값</ko>\n   * @example\n   * ```ts\n   * flicking.addPlugins(new Perspective({ selector: \"p\", scale: 1, rotate: 1, perspective = 1000 }));\n   * ```\n   */\n  public constructor({ selector = \"\", scale = 1, rotate = 1, perspective = 1000 }: Partial<PerspectiveOptions> = {}) {\n    this._flicking = null;\n    this._selector = selector;\n    this._scale = scale;\n    this._rotate = rotate;\n    this._perspective = perspective;\n  }\n\n  public init(flicking: Flicking): void {\n    if (this._flicking) {\n      this.destroy();\n    }\n\n    this._flicking = flicking;\n\n    flicking.on(EVENTS.MOVE, this._onMove);\n    flicking.on(EVENTS.AFTER_RESIZE, this.update);\n    this._onMove();\n  }\n\n  public destroy(): void {\n    if (!this._flicking) return;\n\n    this._flicking.off(EVENTS.MOVE, this._onMove);\n    this._flicking.off(EVENTS.AFTER_RESIZE, this.update);\n    this._flicking = null;\n  }\n\n  public update = (): void => {\n    this._onMove();\n  };\n\n  private _onMove = (): void => {\n    const flicking = this._flicking;\n    const selector = this._selector;\n    const scale = this._scale;\n    const rotate =  this._rotate;\n    const perspective = this._perspective;\n\n    if (!flicking) return;\n\n    const horizontal = flicking.horizontal;\n    const panels = flicking.visiblePanels;\n\n    panels.forEach((panel) => {\n      const progress = panel.outsetProgress;\n      const el = panel.element;\n      const target = selector ? el.querySelector<HTMLElement>(selector)! : el;\n      const panelScale = 1 / (Math.abs(progress * scale) + 1);\n      const rotateDegree = progress > 0 ? Math.min(90, progress * 100 * rotate) : Math.max(-90, progress * 100 * rotate);\n      const [rotateX, rotateY] = horizontal ? [0, rotateDegree] : [rotateDegree, 0];\n\n      target.style.transform = `perspective(${perspective}px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(${panelScale})`;\n    });\n  };\n}\n\nexport default Perspective;\n","import Flicking from \"@egjs/flicking\";\n\nimport Pagination from \"../Pagination\";\n\nexport interface RendererOptions {\n  flicking: Flicking;\n  pagination: Pagination;\n  wrapper: HTMLElement;\n}\n\nabstract class Renderer {\n  protected _flicking: Flicking;\n  protected _pagination: Pagination;\n  protected _wrapper: HTMLElement;\n\n  public constructor({\n    flicking,\n    pagination,\n    wrapper\n  }: RendererOptions) {\n    this._flicking = flicking;\n    this._pagination = pagination;\n    this._wrapper = wrapper;\n  }\n\n  public abstract render(): void;\n  public abstract update(index: number): void;\n}\n\nexport default Renderer;\n","import { FlickingError } from \"@egjs/flicking\";\n\nimport { PAGINATION } from \"../../const\";\nimport { BROWSER } from \"../../event\";\nimport { addClass, removeClass } from \"../../utils\";\n\nimport Renderer from \"./Renderer\";\n\nclass BulletRenderer extends Renderer {\n  private _childs: HTMLElement[] = [];\n\n  public render() {\n    const flicking = this._flicking;\n    const pagination = this._pagination;\n    const renderBullet = pagination.renderBullet;\n    const bulletWrapperClass = `${pagination.classPrefix}-${PAGINATION.BULLET_WRAPPER_SUFFIX}`;\n    const bulletClass = `${pagination.classPrefix}-${PAGINATION.BULLET_SUFFIX}`;\n    const bulletActiveClass = `${pagination.classPrefix}-${PAGINATION.BULLET_ACTIVE_SUFFIX}`;\n    const anchorPoints = flicking.camera.anchorPoints;\n    const wrapper = this._wrapper;\n\n    addClass(wrapper, bulletWrapperClass);\n\n    wrapper.innerHTML = anchorPoints\n      .map((_, index) => renderBullet(bulletClass, index))\n      .join(\"\\n\");\n\n    const bullets = [].slice.call(wrapper.children) as HTMLElement[];\n\n    bullets.forEach((bullet, index) => {\n      const anchorPoint = anchorPoints[index];\n\n      if (anchorPoint.panel.index === flicking.index) {\n        addClass(bullet, bulletActiveClass);\n      }\n\n      bullet.addEventListener(BROWSER.MOUSE_DOWN, e => {\n        e.stopPropagation();\n      });\n\n      bullet.addEventListener(BROWSER.TOUCH_START, e => {\n        e.stopPropagation();\n      }, { passive: true });\n\n      bullet.addEventListener(BROWSER.CLICK, () => {\n        flicking.moveTo(anchorPoint.panel.index)\n          .catch(err => {\n            if (err instanceof FlickingError) return;\n            throw err;\n          });\n      });\n    });\n\n    this._childs = bullets;\n  }\n\n  public update(index: number) {\n    const flicking = this._flicking;\n    const pagination = this._pagination;\n    const bullets = this._childs;\n    const activeClass = `${pagination.classPrefix}-${PAGINATION.BULLET_ACTIVE_SUFFIX}`;\n    const anchorPoints = flicking.camera.anchorPoints;\n\n    if (anchorPoints.length <= 0) return;\n\n    bullets.forEach(bullet => {\n      removeClass(bullet, activeClass);\n    });\n\n    const anchorOffset = anchorPoints[0].panel.index;\n    const activeBullet = bullets[index - anchorOffset];\n\n    addClass(activeBullet, activeClass);\n  }\n}\n\nexport default BulletRenderer;\n","import { PAGINATION } from \"../../const\";\nimport { addClass } from \"../../utils\";\n\nimport Renderer from \"./Renderer\";\n\nclass FractionRenderer extends Renderer {\n  public render() {\n    const flicking = this._flicking;\n    const wrapper = this._wrapper;\n    const pagination = this._pagination;\n    const fractionWrapperClass = `${pagination.classPrefix}-${PAGINATION.FRACTION_WRAPPER_SUFFIX}`;\n    const fractionCurrentClass = `${pagination.classPrefix}-${PAGINATION.FRACTION_CURRENT_SUFFIX}`;\n    const fractionTotalClass = `${pagination.classPrefix}-${PAGINATION.FRACTION_TOTAL_SUFFIX}`;\n\n    addClass(wrapper, fractionWrapperClass);\n\n    wrapper.innerHTML = pagination.renderFraction(fractionCurrentClass, fractionTotalClass);\n\n    this.update(flicking.index);\n  }\n\n  public update(index: number) {\n    const flicking = this._flicking;\n    const wrapper = this._wrapper;\n    const pagination = this._pagination;\n    const fractionCurrentClass = `${pagination.classPrefix}-${PAGINATION.FRACTION_CURRENT_SUFFIX}`;\n    const fractionTotalClass = `${pagination.classPrefix}-${PAGINATION.FRACTION_TOTAL_SUFFIX}`;\n\n    const currentWrapper = wrapper.querySelector(`.${fractionCurrentClass}`) as HTMLElement;\n    const totalWrapper = wrapper.querySelector(`.${fractionTotalClass}`) as HTMLElement;\n    const anchorPoints = flicking.camera.anchorPoints;\n\n    const currentIndex = anchorPoints.length > 0\n      ? index - anchorPoints[0].panel.index + 1\n      : 0;\n\n    currentWrapper.innerHTML = pagination.fractionCurrentFormat(currentIndex);\n    totalWrapper.innerHTML = pagination.fractionTotalFormat(anchorPoints.length);\n  }\n}\n\nexport default FractionRenderer;\n","import { DIRECTION, FlickingError } from \"@egjs/flicking\";\n\nimport { PAGINATION } from \"../../const\";\nimport { BROWSER } from \"../../event\";\nimport { addClass, removeClass } from \"../../utils\";\n\nimport Renderer from \"./Renderer\";\n\nclass ScrollBulletRenderer extends Renderer {\n  private _bullets: HTMLElement[] = [];\n  private _bulletSize: number = 0;\n  private _previousIndex: number = -1;\n  private _sliderIndex: number = -1;\n\n  public render() {\n    const wrapper = this._wrapper;\n    const flicking = this._flicking;\n    const pagination = this._pagination;\n    const renderBullet = pagination.renderBullet;\n    const anchorPoints = flicking.camera.anchorPoints;\n\n    const dynamicWrapperClass = `${pagination.classPrefix}-${PAGINATION.SCROLL_WRAPPER_SUFFIX}`;\n    const bulletClass = `${pagination.classPrefix}-${PAGINATION.BULLET_SUFFIX}`;\n    const sliderClass = `${pagination.classPrefix}-${PAGINATION.SCROLL_SLIDER_SUFFIX}`;\n    const uninitClass = `${pagination.classPrefix}-${PAGINATION.SCROLL_UNINIT_SUFFIX}`;\n\n    const sliderEl = document.createElement(\"div\");\n\n    addClass(sliderEl, sliderClass);\n    addClass(wrapper, uninitClass);\n    addClass(wrapper, dynamicWrapperClass);\n    wrapper.appendChild(sliderEl);\n\n    sliderEl.innerHTML = anchorPoints\n      .map((_, index) => renderBullet(bulletClass, index))\n      .join(\"\\n\");\n\n    const bullets = [].slice.call(sliderEl.children) as HTMLElement[];\n\n    bullets.forEach((bullet, index) => {\n      const anchorPoint = anchorPoints[index];\n\n      bullet.addEventListener(BROWSER.MOUSE_DOWN, e => {\n        e.stopPropagation();\n      });\n\n      bullet.addEventListener(BROWSER.TOUCH_START, e => {\n        e.stopPropagation();\n      }, { passive: true });\n\n      bullet.addEventListener(BROWSER.CLICK, () => {\n        flicking.moveTo(anchorPoint.panel.index)\n          .catch(err => {\n            if (err instanceof FlickingError) return;\n            throw err;\n          });\n      });\n    });\n\n    if (bullets.length <= 0) return;\n\n    const bulletStyle = getComputedStyle(bullets[0]);\n    const bulletSize = bullets[0].clientWidth + parseFloat(bulletStyle.marginLeft) + parseFloat(bulletStyle.marginRight);\n\n    wrapper.style.width = `${bulletSize * pagination.bulletCount}px`;\n\n    this._bullets = bullets;\n    this._bulletSize = bulletSize;\n\n    this.update(this._flicking.index);\n\n    window.requestAnimationFrame(() => {\n      removeClass(wrapper, uninitClass);\n    });\n  }\n\n  public update(index: number) {\n    const pagination = this._pagination;\n    const flicking = this._flicking;\n    const bullets = this._bullets;\n    const prevIndex = this._previousIndex;\n\n    const anchorPoints = flicking.camera.anchorPoints;\n    const anchorOffset = anchorPoints[0].panel.index;\n    const activeIndex = index - anchorOffset;\n\n    if (anchorPoints.length <= 0) return;\n\n    const bulletActiveClass = `${pagination.classPrefix}-${PAGINATION.BULLET_ACTIVE_SUFFIX}`;\n    const prevClassPrefix = `${pagination.classPrefix}-${PAGINATION.SCROLL_PREV_SUFFIX}`;\n    const nextClassPrefix = `${pagination.classPrefix}-${PAGINATION.SCROLL_NEXT_SUFFIX}`;\n    const bulletPrevClass = (offset: number) => `${prevClassPrefix}${offset > 1 ? offset : \"\"}`;\n    const bulletNextClass = (offset: number) => `${nextClassPrefix}${offset > 1 ? offset : \"\"}`;\n\n    const prevClassRegex = new RegExp(`^${prevClassPrefix}`);\n    const nextClassRegex = new RegExp(`^${nextClassPrefix}`);\n\n    bullets.forEach((bullet, idx) => {\n      const indexOffset = idx - activeIndex;\n      const classList = bullet.className.split(\" \");\n\n      for (const className of classList) {\n        if (className === bulletActiveClass || prevClassRegex.test(className) || nextClassRegex.test(className)) {\n          removeClass(bullet, className);\n        }\n      }\n\n      if (indexOffset === 0) {\n        addClass(bullet, bulletActiveClass);\n      } else if (indexOffset > 0) {\n        addClass(bullet, bulletNextClass(Math.abs(indexOffset)));\n      } else {\n        addClass(bullet, bulletPrevClass(Math.abs(indexOffset)));\n      }\n    });\n\n    pagination.scrollOnChange(activeIndex, {\n      total: bullets.length,\n      prevIndex: prevIndex,\n      sliderIndex: this._sliderIndex,\n      direction: activeIndex > prevIndex ? DIRECTION.NEXT : DIRECTION.PREV,\n      bullets: [...bullets],\n      moveTo: this.moveTo\n    });\n\n    this._previousIndex = activeIndex;\n  }\n\n  public moveTo = (index: number): void => {\n    const pagination = this._pagination;\n    const sliderEl = this._wrapper.firstElementChild as HTMLElement;\n    const bulletSize = this._bulletSize;\n    const wrapperSize = bulletSize * pagination.bulletCount;\n\n    sliderEl.style.transform = `translate(${wrapperSize / 2 - (index + 0.5) * bulletSize}px)`;\n    this._sliderIndex = index;\n  };\n}\n\nexport default ScrollBulletRenderer;\n","import Flicking, { EVENTS, Plugin } from \"@egjs/flicking\";\n\nimport { PAGINATION } from \"../const\";\nimport ScrollContext from \"../type\";\n\nimport Renderer from \"./renderer/Renderer\";\nimport BulletRenderer from \"./renderer/BulletRenderer\";\nimport FractionRenderer from \"./renderer/FractionRenderer\";\nimport ScrollBulletRenderer from \"./renderer/ScrollBulletRenderer\";\n\nexport interface PaginationOptions {\n  parentEl: HTMLElement | null;\n  selector: string;\n  type: \"bullet\" | \"fraction\" | \"scroll\";\n  classPrefix: string;\n  bulletCount: number;\n  renderBullet: (className: string, index: number) => string;\n  renderFraction: (currentClass: string, totalClass: string) => string;\n  fractionCurrentFormat: (index: number) => string;\n  fractionTotalFormat: (total: number) => string;\n  scrollOnChange: (index: number, ctx: ScrollContext) => any;\n}\n\n/**\n * @memberof Flicking.Plugins\n */\nclass Pagination implements Plugin {\n  /* Internal Values */\n  private _flicking: Flicking | null = null;\n  private _renderer: Renderer;\n  private _wrapper: HTMLElement;\n\n  /* Options */\n  private _parentEl: PaginationOptions[\"parentEl\"];\n  private _selector: PaginationOptions[\"selector\"];\n  private _type: PaginationOptions[\"type\"];\n  private _classPrefix: PaginationOptions[\"classPrefix\"];\n  private _bulletCount: PaginationOptions[\"bulletCount\"];\n  private _renderBullet: PaginationOptions[\"renderBullet\"];\n  private _renderFraction: PaginationOptions[\"renderFraction\"];\n  private _fractionCurrentFormat: PaginationOptions[\"fractionCurrentFormat\"];\n  private _fractionTotalFormat: PaginationOptions[\"fractionTotalFormat\"];\n  private _scrollOnChange: PaginationOptions[\"scrollOnChange\"];\n\n  public get parentEl() { return this._parentEl; }\n  public get selector() { return this._selector; }\n  public get type() { return this._type; }\n  public get classPrefix() { return this._classPrefix; }\n  public get bulletCount() { return this._bulletCount; }\n  public get renderBullet() { return this._renderBullet; }\n  public get renderFraction() { return this._renderFraction; }\n  public get fractionCurrentFormat() { return this._fractionCurrentFormat; }\n  public get fractionTotalFormat() { return this._fractionTotalFormat; }\n  public get scrollOnChange() { return this._scrollOnChange; }\n\n  public set parentEl(val: PaginationOptions[\"parentEl\"]) { this._parentEl = val; }\n  public set selector(val: PaginationOptions[\"selector\"]) { this._selector = val; }\n  public set type(val: PaginationOptions[\"type\"]) { this._type = val; }\n  public set bulletWrapperclassPrefixClass(val: PaginationOptions[\"classPrefix\"]) { this._classPrefix = val; }\n  public set bulletCount(val: PaginationOptions[\"bulletCount\"]) { this._bulletCount = val; }\n  public set renderBullet(val: PaginationOptions[\"renderBullet\"]) { this._renderBullet = val; }\n  public set renderFraction(val: PaginationOptions[\"renderFraction\"]) { this._renderFraction = val; }\n  public set fractionCurrentFormat(val: PaginationOptions[\"fractionCurrentFormat\"]) { this._fractionCurrentFormat = val; }\n  public set fractionTotalFormat(val: PaginationOptions[\"fractionTotalFormat\"]) { this._fractionTotalFormat = val; }\n  public set scrollOnChange(val: PaginationOptions[\"scrollOnChange\"]) { this._scrollOnChange = val; }\n\n  public constructor({\n    parentEl = null,\n    selector = PAGINATION.SELECTOR,\n    type = PAGINATION.TYPE.BULLET,\n    classPrefix = PAGINATION.PREFIX,\n    bulletCount = 5,\n    renderBullet = (className: string) => `<span class=\"${className}\"></span>`,\n    renderFraction = (currentClass: string, totalClass: string) => `<span class=\"${currentClass}\"></span>/<span class=\"${totalClass}\"></span>`,\n    fractionCurrentFormat = (index: number) => index.toString(),\n    fractionTotalFormat = (index: number) => index.toString(),\n    scrollOnChange = (index: number, ctx: ScrollContext) => ctx.moveTo(index)\n  }: Partial<PaginationOptions> = {}) {\n    this._parentEl = parentEl;\n    this._selector = selector;\n    this._type = type;\n    this._classPrefix = classPrefix;\n    this._bulletCount = bulletCount;\n    this._renderBullet = renderBullet;\n    this._renderFraction = renderFraction;\n    this._fractionCurrentFormat = fractionCurrentFormat;\n    this._fractionTotalFormat = fractionTotalFormat;\n    this._scrollOnChange = scrollOnChange;\n  }\n\n  public init(flicking: Flicking): void {\n    if (this._flicking) {\n      this.destroy();\n    }\n\n    this._flicking = flicking;\n\n    const type = this._type;\n    const selector = this._selector;\n    const parentEl = this._parentEl ? this._parentEl : flicking.element;\n    const wrapper = parentEl.querySelector(selector);\n\n    if (!wrapper) {\n      throw new Error(`[Flicking-Pagination] Couldn't find element with the given selector: ${selector}`);\n    }\n\n    this._wrapper = wrapper as HTMLElement;\n    this._renderer = this._createRenderer(type);\n\n    flicking.on(EVENTS.WILL_CHANGE, this._onIndexChange);\n    flicking.on(EVENTS.WILL_RESTORE, this._onIndexChange);\n    flicking.on(EVENTS.PANEL_CHANGE, this.update);\n\n    this.update();\n  }\n\n  public destroy(): void {\n    const flicking = this._flicking;\n\n    if (!flicking) {\n      return;\n    }\n\n    flicking.off(EVENTS.WILL_CHANGE, this._onIndexChange);\n    flicking.off(EVENTS.WILL_RESTORE, this._onIndexChange);\n    flicking.off(EVENTS.PANEL_CHANGE, this.update);\n\n    this._removeAllChilds();\n    this._flicking = null;\n  }\n\n  public update = (): void => {\n    this._removeAllChilds();\n    this._renderer.render();\n  };\n\n  private _createRenderer(type: PaginationOptions[\"type\"]) {\n    const options = {\n      flicking: this._flicking!,\n      pagination: this,\n      wrapper: this._wrapper\n    };\n\n    switch (type) {\n      case PAGINATION.TYPE.BULLET:\n        return new BulletRenderer(options);\n      case PAGINATION.TYPE.FRACTION:\n        return new FractionRenderer(options);\n      case PAGINATION.TYPE.SCROLL:\n        return new ScrollBulletRenderer(options);\n      default:\n        throw new Error(`[Flicking-Pagination] type \"${type}\" is not supported.`);\n    }\n  }\n\n  private _onIndexChange = (evt: { index: number }) => {\n    this._renderer.update(evt.index);\n  };\n\n  private _removeAllChilds() {\n    const wrapper = this._wrapper;\n\n    while (wrapper.firstChild) {\n      wrapper.removeChild(wrapper.firstChild);\n    }\n  }\n}\n\nexport default Pagination;\n","/**\n * @namespace Flicking\n */\n/**\n * @namespace Flicking.Plugins\n */\nimport Parallax from \"./Parallax\";\nimport Fade from \"./Fade\";\nimport AutoPlay from \"./AutoPlay\";\nimport Arrow from \"./Arrow\";\nimport Sync, { SyncOptions, SychronizableFlickingOptions } from \"./Sync\";\nimport Perspective from \"./Perspective\";\n\nexport * from \"./pagination\";\n\nexport {\n  Parallax,\n  Fade,\n  AutoPlay,\n  Arrow,\n  Sync,\n  Perspective\n};\n\nexport type {\n  SyncOptions,\n  SychronizableFlickingOptions\n};\n\nexport * from \"./const\";\n"],"names":["selector","scale","_this","_onMove","flicking","_flicking","panels","visiblePanels","forEach","panel","progress","outsetProgress","el","element","target","_selector","querySelector","parentTarget","parentNode","rect","getBoundingClientRect","parentRect","position","width","_scale","transform","style","cssText","Object","val","destroy","on","EVENTS","MOVE","AFTER_RESIZE","update","off","opacity","Math","min","max","abs","_a","_b","_c","duration","_d","animationDuration","undefined","_e","direction","DIRECTION","NEXT","_f","stopOnHover","delayAfterHover","_movePanel","_duration","clearTimeout","_timerId","_mouseEntered","stop","_delayAfterHover","_animationDuration","_direction","_stopOnHover","MOVE_START","HOLD_START","MOVE_END","play","SELECT","targetEl","addEventListener","_onMouseEnter","_onMouseLeave","removeEventListener","animating","window","setTimeout","next","catch","prev","BROWSER","CLICK","MOUSE_DOWN","TOUCH_START","ARROW","PREV_SELECTOR","NEXT_SELECTOR","DISABLED_CLASS","PAGINATION","SELECTOR","PREFIX","BULLET_WRAPPER_SUFFIX","BULLET_SUFFIX","BULLET_ACTIVE_SUFFIX","FRACTION_WRAPPER_SUFFIX","FRACTION_CURRENT_SUFFIX","FRACTION_TOTAL_SUFFIX","SCROLL_UNINIT_SUFFIX","SCROLL_WRAPPER_SUFFIX","SCROLL_SLIDER_SUFFIX","SCROLL_PREV_SUFFIX","SCROLL_NEXT_SUFFIX","TYPE","BULLET","FRACTION","SCROLL","SYNC","CAMERA","INDEX","addClass","className","classList","add","classes","split","indexOf","removeClass","remove","classRegex","RegExp","replace","getElement","parent","pluginName","Error","parentEl","prevElSelector","nextElSelector","disabledClass","_g","moveCount","_h","moveByViewportSize","e","stopPropagation","camera","anchorPoints","length","firstAnchor","_moveCount","_moveByViewportSize","control","moveToPosition","size","_onCatch","circularEnabled","targetPanel","currentPanel","i","focus","index","moveTo","range","lastAnchor","controller","holding","_updateClass","animatingContext","end","err","FlickingError","_parentEl","_prevElSelector","_nextElSelector","_disabledClass","_prevEl","_nextEl","_onAnimation","prevEl","nextEl","evt","_preventInputPropagation","passive","_onPrevClick","_onNextClick","pos","cameraRange","stopAtPrevEdge","stopAtNextEdge","type","synchronizedFlickingOptions","_type","synced","_synchronizedFlickingOptions","isSlidable","isClickable","_onMoveStart","_onMoveEnd","WILL_CHANGE","_onIndexChange","WILL_RESTORE","_onSelect","currentTarget","initialized","_synchronizeByIndex","rangeDiff","targetPosition","lookAt","disableInput","enableInput","updateInput","activeFlicking","_preventEvent","options","targetIndex","clamp","once","activeClass","_addEvents","syncedFlicking","defaultIndex","_removeEvents","fn","rotate","perspective","_rotate","_perspective","horizontal","panelScale","rotateDegree","rotateX","rotateY","pagination","wrapper","_pagination","_wrapper","__extends","renderBullet","bulletWrapperClass","classPrefix","bulletClass","bulletActiveClass","innerHTML","map","_","join","bullets","slice","call","children","bullet","anchorPoint","_childs","anchorOffset","activeBullet","Renderer","fractionWrapperClass","fractionCurrentClass","fractionTotalClass","renderFraction","currentWrapper","totalWrapper","currentIndex","fractionCurrentFormat","fractionTotalFormat","sliderEl","firstElementChild","bulletSize","_bulletSize","wrapperSize","bulletCount","_sliderIndex","dynamicWrapperClass","sliderClass","uninitClass","document","createElement","appendChild","bulletStyle","getComputedStyle","clientWidth","parseFloat","marginLeft","marginRight","_bullets","requestAnimationFrame","prevIndex","_previousIndex","activeIndex","prevClassPrefix","nextClassPrefix","bulletPrevClass","offset","bulletNextClass","prevClassRegex","nextClassRegex","idx","indexOffset","classList_1","_i","test","scrollOnChange","total","sliderIndex","PREV","_j","currentClass","totalClass","_k","toString","_l","_m","ctx","_removeAllChilds","_renderer","render","_classPrefix","_bulletCount","_renderBullet","_renderFraction","_fractionCurrentFormat","_fractionTotalFormat","_scrollOnChange","_createRenderer","PANEL_CHANGE","BulletRenderer","FractionRenderer","ScrollBulletRenderer","firstChild","removeChild"],"mappings":"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"}